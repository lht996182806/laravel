!function(e){function t(i){if(a[i])return a[i].exports;var o=a[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){function i(e,t){if(e&&t){var a=e.lastIndexOf("."),i=e.slice(a),o=e.slice(0,a),s=o+"!"+t+"x"+t+i;return s}}function o(e){var t={elm:".J_bubbleTipTrigger",conWidth:400,conHtml:"",zindex:999},a=$.extend(t,e),i=$(a.elm);if(i.length){a.conHtml||(a.conHtml=i.attr("data-content"));var o=i.outerWidth(),s=i.outerHeight(),n=i.offset().top,r=i.offset().left;i.on("click",function(e){e.stopPropagation();var t=$("<div />");t.attr({"class":"bubble-tip-content J_bubbleTipContent"}).css({width:a.conWidth+"px",position:"absolute",top:n+s+10+"px",left:r-a.conWidth/2+o/2,"z-index":a.zindex}).html("<p>"+a.conHtml+"</p>"),$("body").append(t)}),$(document).on("click.hideBubbleTip",function(e){var t=$(".J_bubbleTipContent");t.is(e.target)||0!==t.has(e.target).length||t.remove()})}}a(2),MI.namespace("buyChoose"),MI.namespace("openSaleRegister"),MI.openSaleRegister={options:{setUrl:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleRegister",checkUrl:MI.GLOBAL_CONFIG.orderSite+"/misc/onsaleCheck",isLogin:$.cookie("userId")&&$.cookie("xm_order_btauth")?!0:!1,loginUrl:MI.GLOBAL_CONFIG.orderSite+"/site/login?ac=1&redirectUrl="+location.href},check:function(e,t){var a=this;if(e)return a.options.isLogin?void $.ajax({url:a.options.checkUrl,dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_list:e},timeout:5e3,error:function(){alert("网络错误，请重试!")},success:function(i){if(i&&1===i.code){var o=i.data[e]?!0:!1;"function"==typeof t&&t(o)}else-2===i.code&&(location.href=a.options.loginUrl)}}):(location.href=a.options.loginUrl,!1)},register:function(e){var t=this,a=multiline(function(){/*!@tpl
	        <div class="modal modal-opensale-register hdie fade" id="J_modalOpenSaleRegister">
	            <span class="close iconfont"  data-dismiss="modal">&#xe602;</span>
	            <div class="modal-body">
	                <h4>开售提醒设置成功!</h4>

	                <p>
	                    请下载小米商城App ，开启通知功能<br>
	                    产品开售前，我们会通知您。
	                </p>
	                <img src="http://i3.mifile.cn/f/i/2014/cn/appdownload/apdownload-phone-code.png" alt="">
	                <span class="btn btn-primary" data-dismiss="modal">我知道了</span>
	            </div>
	        </div>
	      */
console.log()});return e?t.options.isLogin?void $.ajax({url:t.options.setUrl,dataType:"jsonp",jsonp:"jsonpcallback",data:{goods_id:e},timeout:5e3,error:function(){alert("网络错误，请重试!")},success:function(e){e&&1===e.code?($("#J_modalOpenSaleRegister").remove(),$("body").append(a),$("#J_modalOpenSaleRegister").modal("show")):-2===e.code&&(location.href=t.options.loginUrl)}}):(location.href=t.options.loginUrl,!1):void 0}},MI.buyChoose=function(){var e={packageData:null,stockData:null,lastStepNum:0,packageResult:{},insuranceResult:{},stepActiveClass:"active",stepLockClass:"lock",stepDisableClass:"disable",proFullName:"",hdInfoModeType:""},t=function(){return alert("参数错误!"),location.href=MI.GLOBAL_CONFIG.itemSite+"/buyphone/",!1},a=function(){window.chooseConfig&&window.chooseConfig.phone_type?($("#J_navBar").find(".J_item[data-pro="+window.chooseConfig.phone_type+"]").addClass("current").siblings().removeClass("current"),o()):t()},o=function(){return window.chooseConfig&&window.chooseConfig.version_data?void s(window.chooseConfig.version_data):t()},s=function(a){if(!a)return t();if(a.href_url&&$("#J_proMore").removeClass("hide").attr("href",a.href_url),$("#J_proImg").attr({src:a.img,alt:a.title}),$(".J_proDesc, #J_headerBarDesc").html(a.desc),a.price_min&&a.price_max){var i=a.price_min+"元";a.price_min<a.price_max&&(i+="起"),$(".J_proPrice").html(i)}e.proFullName=a.title,e.packageData=window.chooseConfig.package_data,n(),r(a),c()},n=function(){$.ajax({url:window.orderapi+"/stock/goods?gids="+window.chooseConfig.opensell_ids.join(","),dataType:"jsonp",jsonp:"jsonpcallback"}).done(function(t){e.stockData=t.data;var a=$('.J_step[data-index="1"]').find(".J_stepItem");a.hasClass(e.stepDisableClass)||1!==a.length||a.eq(0).trigger("click")})},r=function(t,a){var i=a?a:0;i+=1,i>1&&(t.lock=!0),t.stepIndex=i;var o=$(".J_step[data-index="+i+"]"),s=1,n=doT.template($("#J_chooseStepTemplate").html());if(o&&o.length>0){if(!t.children)return void o.empty();o.html(n(t)),s=o.find(".J_stepItem[data-index="+i+"]").eq(0).attr("data-node-id"),s=parseInt(s),e.lastStepNum=i,l(t,s,i)}else if(t.children){var r=$("<div>");r.addClass("pro-choose-step J_step"),r.attr("data-index",i),r.html(n(t)),$("#J_proStep").append(r),s=$(".J_stepItem[data-index="+i+"]").eq(0).attr("data-node-id"),s=parseInt(s,10),l(t,s,i)}},l=function(e,t,a){e&&t&&$.each(e.children,function(e,i){return i.node_id===t?(r(i,a),!1):void(i.children&&l(i,t,a))})},c=function(){$(".J_step").off().on("click",".J_stepItem",function(){var t=$(this).hasClass(e.stepLockClass),a=$(this).hasClass(e.stepDisableClass);if(!a&&!t){var i=parseInt($(this).attr("data-node-id")),o=parseInt($(this).attr("data-index")),s=$(this).attr("data-href");$(this).addClass(e.stepActiveClass).siblings().removeClass(e.stepActiveClass);var n=$(this).attr("data-desc")?$(this).attr("data-desc"):"";if($(".J_verDesc[data-index="+o+"]").html(n),s)return $("#J_chooseResultInit").find(".btn").attr("href",s).addClass("btn-primary").removeClass("btn-dakeLight"),void T();$("#J_chooseResultInit").find(".btn").attr("href","javascript:void(0);").addClass("btn-dakeLight").removeClass("btn-primary");var r=$(this).attr("data-title-price");r&&$(".J_proPrice").html(r),d(o),l(window.chooseConfig.version_data,i,o);var c=o+1,p=$(".J_step[data-index="+c+"]").find(".J_stepItem");p.removeClass(e.stepLockClass),C();var u=$(this).attr("data-gid");u?h($(this)):(R(),x());var f="";T(f);var m=p.not("."+e.stepDisableClass);1===m.length&&setTimeout(function(){p.eq(0).trigger("click")},0)}})},d=function(e){var t=parseInt(e,10),a=0;$(".J_step").each(function(){a=parseInt($(this).attr("data-index"),10),a>t&&$(this).empty()})},h=function(t){if(t&&!(t.length<=0)){var a=t.attr("data-img"),i=t.attr("data-gid"),o=t.attr("data-presales"),s=t.attr("data-presales-status"),n=t.attr("data-presales-url"),r=t.attr("data-openbuy"),l=t.attr("data-openbuy-status"),c=t.attr("data-opensell"),d=t.attr("data-opensell-status"),h=t.attr("data-opensell-url"),u=t.attr("data-href"),m=t.attr("data-fixedlink-url"),g=t.attr("data-fixedlink-txt"),v={};if(v.gid=i,v.presales="1"===o?!0:!1,v.presalesStatus="1"===s?!0:!1,v.presalesUrl=n,v.openbuy="1"===r?!0:!1,v.openbuyStatus="1"===l?!0:!1,v.openSell="1"===c?!0:!1,v.openSellStatus="1"===d?!0:!0,v.openSellUrl=h,m&&g)try{v.fixedlink_url=m,v.fixedlink_txt=g,v.is_fixedlink=!0}catch(_){}v.hrefUrl=u,a&&$("#J_proImg").attr("src",a),e.chooseResult=v;var b=p(v.gid);if(b)return f(),void R();if(v.openSell&&v.openSellStatus||v.presales&&v.presalesStatus||v.is_fixedlink){if(v.openSell&&v.openSellStatus&&e.stockData&&e.stockData[v.gid]){var k=e.stockData[v.gid];if(k&&!k.stock)return R(),v.openSellStatus=!1,void C(v)}e.packageData.length>0?J():C(v)}else R(),x()}},p=function(e){if(!e)return!1;var t=window.chooseConfig.book_bigtap_ids,a=!1;return $.each(t,function(t){return t===e?(a=!0,!1):void 0}),a},u=function(t){var a="//tptm.hd.mi.com/gettimestamp";$.ajax({url:a,dataType:"script",timeout:5e3,error:function(){e.serverTime=(new Date).getTime()/1e3,t()},success:function(){e.serverTime=servertime&&"number"==typeof servertime?servertime:(new Date).getTime()/1e3,"function"==typeof t&&t()}})},f=function(){var t=window.chooseConfig.book_bigtap_ids[e.chooseResult.gid];m(t)},m=function(t){t&&($("#J_chooseResultInit").addClass("hide"),$("#J_chooseResult").html('<a  class="btn btn-large btn-dakeLight" >正在加载...</a>').removeClass("hide"),u(function(){t.book_end_time>=e.serverTime&&t.is_book?g(0,t):t.buy_start_time>=e.serverTime?g(1,t):g(2,t)}))},g=function(t,a){var i=$("#J_chooseResult"),o=b();0===t?i.html('<a href="'+a.book_url+'" class="btn btn-large btn-primary" >立即预约</a>'):1===t&&a?(i.html('<a href="javascript:void(0);" class="btn btn-large btn-gray btn-coutdown"  id="J_bigtapCoutdown">正在加载...</a>'),a.is_book&&a.book_check_url&&i.append('<a href="'+a.book_check_url+'" target="_blank">预约查询</a>'),o||i.append('<div class="choose-pre-login">您尚未登录，请提前 <a href="'+MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href+'">登录</a></div>'),_(a)):2===t&&a?k(a):3===t?e.packageData.length>0?($("#J_chooseResult").html('<a  class="btn btn-large btn-gray" >下一步</a>').removeClass("hide"),J()):C(e.chooseResult):4===t?(i.html('<a href="javascript:void(0);" class="btn btn-large btn-gray">未预约</a>'),a&&i.append('<a href="'+a.book_check_url+'" target="_blank">预约查询</a>'),v({msg:"抱歉，您未预约本轮开放购买，暂无购买资格。"})):5===t||7===t?MI.openSaleRegister.check(e.chooseResult.gid,function(t){i.html(t?'<a href="javascript:void(0);" class="btn btn-large btn-gray" >暂时缺货</a><div class="open-sale-msg">您已设置开售提醒</div>':'<a data-gid="'+e.chooseResult.gid+'" href="javascript:void(0);" class="btn btn-large btn-primary J_openSaleRegisterBtn">设置开售提醒</a>')}):6===t&&i.html('<a href="javascript:void(0);" class="btn btn-large btn-gray">活动即将开始...</a>')},v=function(e){if(e){var t=$("#J_modalBigtapTip"),a=t.find(".modal-body"),i=t.find(".modal-footer > .btn");a.html(e.msg),e.link?i.attr("href",e.link).html(e.linkText).removeAttr("data-dismiss"):i.removeAttr("href").html("看看其他商品").attr("data-dismiss","modal"),t.modal("show").on("hidden.bs.modal",function(){a.html("")})}},_=function(t){var a=$("#J_bigtapCoutdown");if(a.length&&t){var i,o,s=t.buy_start_time,n=parseInt((new Date).getTime()/1e3),r=0,l=!1,c=function(){r=e.serverTime-n,s-e.serverTime>=3600?g(7):p()},d=function(){a.html("正在加载..."),g(3)},h=function(){s-e.serverTime>=180&&180>=o&&!l&&(u(function(){r=e.serverTime-parseInt((new Date).getTime()/1e3)}),l=!0)},p=function(){if(i=parseInt((new Date).getTime()/1e3)+r,o=s-i,o>0){var e,t,n=Math.floor(o%60),l=Math.floor(o/60%60),c=Math.floor(o/3600%24),u=Math.floor(o/86400);u>0&&(c+=24*u),e=[n.toString(),l.toString(),c.toString(),u.toString()],t="距离开售：<i>"+e[2]+"</i>小时<i>"+e[1]+"</i>分<i>"+e[0]+"</i>秒",0===c&&(t="距离开售：<i>"+e[1]+"</i>分<i>"+e[0]+"</i>秒",0===l&&(t="距离开售：<i>"+e[0]+"</i>秒")),h(),a.html(t),window.countDownTimer&&clearTimeout(window.countDownTimer),window.countDownTimer=setTimeout(function(){p()},1e3)}else d()};c()}},b=function(){var e=$.cookie("userId"),t=$.cookie("xm_order_btauth");return e&&t?!0:!1},k=function(t){var a=MI.GLOBAL_CONFIG.damiaoSite+"hdinfo/cn",i=b();return i?(t.is_book||(a+="?product="+e.chooseResult.gid),R(),x(),void $.ajax({url:a,dataType:"jsonp",jsonp:"callback",jsonpCallback:"hdinfo",data:{storage:"000",m:1},timeout:1e4,error:function(){alert("抱歉！网络错误，请刷新重试！")},success:function(a){if(a&&a.status){var i=a.status[e.chooseResult.gid];if(e.hdInfoModeType=a.dbe5a2,!i)return void g(5);i.hdstart&&!i.hdstop&&i.reg?g(3):!i.hdstart||i.hdstop||i.reg?g(!i.hdstart&&i.hdstop?5:6):t.is_book?g(4,t):g(3)}else alert("数据错误，请刷新重试！")}})):(window.location.href=MI.GLOBAL_CONFIG.orderSite+"/site/login?redirectUrl="+location.href,!1)},C=function(t){if(!t)return $("#J_chooseResultInit").removeClass("hide"),void $("#J_chooseResult").addClass("hide").empty();var a=doT.template($("#J_chooseResuleTemplate").html()),i="",o="";t.openSell&&!t.openSellStatus?MI.openSaleRegister.check(t.gid,function(s){t.saleReg=s?!0:!1,i=a(t),$("#J_chooseResult").html(i).removeClass("hide"),$("#J_chooseResultInit").addClass("hide"),o=$("#J_proBuyBtn").attr("data-gid"),e.primaryGoodsId=o,w(o)}):(i=a(t),$("#J_chooseResult").html(i).removeClass("hide"),$("#J_chooseResultInit").addClass("hide"),o=$("#J_proBuyBtn").attr("data-gid"),e.primaryGoodsId=o,w(o))},w=function(t,a){function i(){var t=MI.GLOBAL_CONFIG.cartSite+"/cart/recommend/goods_id/"+e.primaryGoodsId;e.packageResult&&e.packageResult.pid&&(t+="?package"),location.href=t}function o(t){if(t&&1===t.code)if(a)i();else if(e.packageResult.pid&&e.packageResult.list.length>0){var o=e.packageResult.pid+"-"+e.packageResult.list.join("|");w(o,!0)}else i();else 1!==t.code&&(alert(t.msg),a&&i())}return t?void(a?MI.addShopCart(t,o):MI.bigtapAddCart({obj:"#J_proBuyBtn",modeType:e.hdInfoModeType,callback:o,overCallback:function(e){$(e).removeClass("btn-primary").addClass("btn-dakeLight").html("已售罄").removeAttr("id")}})):!1},J=function(t){var a=doT.template($("#J_packageTemplate").html()),i={},o=0;return i.stepIndex=e.lastStepNum+1,i.packageItem=[],i.lock=t?!0:!1,e.packageData.length<=0?!1:($.each(e.packageData,function(e,a){o=1*(parseFloat(a.market_price)-parseFloat(a.show_price)).toFixed(2),i.packageItem.push({title:a.commodity_name,packageId:a.commodity_id,save_price:o,show_price:a.show_price,lock:t?!0:!1})}),R(),x(),$("#J_proStep").append(a(i)),void $(".J_packageItem").on("click",function(){var t=$(this).attr("data-pid"),a=$(this).hasClass(e.stepActiveClass),i=$(this).hasClass(e.stepLockClass);a||i?($("#J_packageListBox").show(),$("#J_chooseMain").addClass("show-package")):($(this).addClass(e.stepActiveClass).siblings().removeClass(e.stepActiveClass),t?(I(t),e.packageResult.pid=t):x(),C(e.chooseResult),T())}))},I=function(t){if(t){var a=null;if($.each(e.packageData,function(e,i){return i.commodity_id===t?(a=i,!1):void 0}),a){var o=doT.template($("#J_packageListTemplate").html()),s={},n=1*(parseFloat(a.market_price)-parseFloat(a.show_price)).toFixed(2);s.title=a.commodity_name+"－<i>仅"+a.show_price+"元省"+n+"元</i>",s.list=[],$.each(a.list,function(e,t){s.list[e]={versions:[]},1===t.length&&(s.list[e].verHide=!0),$.each(t,function(t,a){0===t&&(s.list[e].goods_name=a.commodity_name,s.list[e].image=a.image),s.list[e].versions.push({image:i(a.image,140),icon:i(a.icon,14),gid:a.goods_id,title:a.commodity_name})})}),x(),$("#J_proStep").after(o(s)).addClass("show-package"),y()}}},y=function(){$(".J_packageListVersions").find(".J_item").on("click",function(){var e=$(this).attr("data-img"),t=$(this).attr("data-title");$(this).addClass("selected").siblings().removeClass("selected"),$(this).parent().siblings(".J_itemImg").find("img").attr({src:e}),$(this).parent().siblings(".J_itemTitle").html(t),S()}),$(".J_packageListVersions").each(function(){$(this).find(".J_item").eq(0).trigger("click")}),S()},x=function(t){t?$("#J_packageListBox").hide():($("#J_packageListBox").remove(),e.packageResult={}),$("#J_chooseMain").removeClass("show-package")},R=function(){$("#J_choosePackage").remove()},S=function(){e.packageResult.list=[],$(".J_packageListVersions").find(".J_item").each(function(){var t=$(this).hasClass("selected");if(t){var a=$(this).attr("data-gid");e.packageResult.list.push(a)}})},T=function(t){var a=e.proFullName;$(".J_stepItem").each(function(){$(this).hasClass("active")&&(a+=" "+$(this).attr("title"))}),t&&(a+=t),$("#J_chooseResultMsg .msg-bd").html(a),$("#J_headerBarDesc").html(a),$(".J_packageItem").each(function(){return $(this).hasClass("active")&&$(this).attr("data-pid")?(a+="<br>"+$(this).attr("title"),$("#J_chooseResultMsg  .msg-bd").html(a),!1):void 0})},D=function(e){var t=e+"&v="+parseInt((new Date).getTime()/1e5),a=MI.GLOBAL_CONFIG.itemSite+"/buyphone/getBuyphoneRecommend?phone_type="+t,i=$(".J_recommendGoods");$.ajax({url:a,method:"get",dataType:"json",error:function(){i.hide()},success:function(e){if(1===e.code){i.show();var t=doT.template($("#J_multiDescRecommend").html());i.find(".container").html(t(e.data))}else i.hide()}})},L={init:function(){var e=$(".pro-detail-box");$.each(window.chooseConfig.multi_desc,function(t,a){var i;"video"===a.type?(i=doT.template($("#J_multiDescVideo").html()),e.append(i(a.data))):"image"===a.type&&a.data.length?(i=doT.template(1===a.data.length?$("#J_multiDescImage").html():$("#J_multiDescSlider").html()),e.append(i(a.data))):"specs"===a.type&&(i=doT.template($("#J_multiDescSpecs").html()),e.append(i(a.data)))}),this.initialize()},initialize:function(){var e=this;e.slideshow($(".J_slide"),null),e.headerBar(),e.winResize(),this.bindEvt()},bindEvt:function(){var e=this;$(".J_showVideo").on("click",function(){var t=$(this).attr("data-video-url");return t&&e.showVideo(t),!1}),$("#J_showSpec").on("click",function(){$(this).toggleClass("spec-open"),$("#J_specCon").toggleClass("hide")}),$(window).on("resize",function(){e.winResize()}),$("#J_proDetailBox .section").on("visible.visibleWatcher",function(){$(".lazyload",this).each(function(){var e=$(this).attr("data-bg"),t=$(this).attr("data-img");if(e||t){var a=!!e;a?$(this).css("background-image","url("+e+")"):$(this).attr("src",t)}})}),$("#J_proDetailBox .section").visibleWatcher({offset:-300})},showVideo:function(e){var t='<iframe height="348" width="530" src="{{URL}}" frameborder="0" allowfullscreen=""></iframe>';e&&$("#J_showVideo").on("hidden.bs.modal",function(){$(this).find(".modal-body").html("")}).on("show.bs.modal",function(){$(this).find(".modal-body").html(t.replace("{{URL}}",e))}).modal("show")},slideshow:function(e,t){function a(e){i.eq(e).fadeIn(n.duration).siblings().fadeOut(n.duration),n.pager&&o.children(".page").eq(e).addClass("active").siblings().removeClass("active")}var i,o,s,n,r,l=$(e),c="",d='<a class="slide-previous">上一页</a><a class="slide-next">下一页</a>',h=0;return 0===l.length?l:l.length>1?(l.each(function(){L.slideshow($(this),t)}),l):(s={itemSelector:".slide",control:!0,pager:!0,auto:!1,delay:5e3,duration:300},n=$.extend({},s,t),i=l.find(n.itemSelector),i.length<=1?e:(i.wrapAll('<div class="slides-wrapper"></div>'),n.pager&&(c='<div class="pagination">',i.each(function(e){c+='<a class="page" href="javascript: void(0);">'+e+"</a>"}),c+="</div>",o=$(c),l.append(o),o.children(".page").on("click",function(e){e.preventDefault(),h=$(this).index(),a(h)})),n.control&&(l.append($(d)),l.find(".slide-previous").on("click",function(e){e.preventDefault(),h-=1,0>h&&(h=i.length-1),a(h)}),l.find(".slide-next").on("click",function(e){e.preventDefault(),h+=1,h>i.length-1&&(h=0),a(h)})),n.auto&&(r=setInterval(function(){h+=1,h>i.length-1&&(h=0),a(h)},n.delay)),void a(h)))},headerBar:function(){var e=$("#J_proDetailBox").offset().top,t=$("#J_headerBar"),a="header-bar-active";$(window).on("scroll",function(){$(this).scrollTop()>=e?t.addClass(a):t.removeClass(a)}),t.find(".btn").on("click",function(){$("html, body").animate({scrollTop:150},500)})},winResize:function(){var e=$(window).width(),t=$(".J_resizeItem"),a=1260;t.each(function(){var t=$(this).attr("data-src-orig"),i=$(this).attr("data-src-s");a>=e?i&&$(this).attr("src",i):t&&$(this).attr("src",t)})}},B=function(){var e=$(window).height(),t=680;t>=e&&$("#J_proImg").height("80%")},M=function(){a(),L.init(),B();var e=!1;$(window).on("scroll",function(){$(".J_recommendGoods").hasClass("is-visible")&&e===!1&&(D(window.chooseConfig.phone_type),e=!0)}),$("#J_chooseResult").on("click",".J_openSaleRegisterBtn",function(){var e=$(this).attr("data-gid");return MI.openSaleRegister.register(e),!1})};return{init:M}}(),$(document).ready(function(){MI.buyChoose.init(),o({conWidth:500})})},function(e,t){!function(e){function t(t){function a(){for(var t=-1,a=e(document).scrollTop(),i=0,o=c.length;o>i&&a+n.viewport.height()>c[i];i+=1)t+=1;return t}function i(){var t=a();l!==t&&(l=t,r.filter(function(t){return l>=t&&!e(this).hasClass(n.visibleClass)}).addClass(n.visibleClass).trigger("visible.visibleWatcher"),n.onVisible(r.eq(l),l))}function o(){r.each(function(){var t=e(this).attr("data-offset")?Number(e(this).attr("data-offset")):n.offset,a=t%1===0?t:t*n.viewport.height();c.push(e(this).offset().top+a)}),i(),n.onLoad()}var s,n,r=e(this),l=-1,c=[];s={viewport:e(window),visibleClass:"is-visible",offset:300,onLoad:e.noop,onVisible:e.noop},n=e.extend({},s,t),o(),n.viewport.on({"scroll.visibleWatcher":i,"resize.visibleWatcher":o})}e.fn.visibleWatcher=function(e){return t.call(this,e),this}}(jQuery)}]);