(function(a){a.fn.iSimulateSelect=function(b){b=a.extend({selectBoxCls:"i_selectbox",curSCls:"i_currentselected",optionCls:"i_selectoption",selectedCls:"selected",width:222,height:300,zindex:20},b||{});this.hide();return this.each(function(){var e=this,f,d,g=0;0==b.width&&(b.width=a(e).width());var c='<div class="'+b.selectBoxCls+'" style="z-index:'+b.zindex+'"><div class="'+b.curSCls+'" style="width:'+b.width+'px">'+a(e).find("option:selected").text()+'</div><dl class="'+b.optionCls+'" style="display:none;width:'+
b.width+'px">';0<a(e).find("optgroup").size()?a(this).find("optgroup").each(function(){c=c+("<dt>"+a(this).attr("label")+"</dt>");a(this).find("option").each(function(){c=a(this).is(":selected")?c+('<dd class="'+b.selectedCls+'">'+a(this).text()+"</dd>"):c+("<dd>"+a(this).text()+"</dd>")})}):a(this).find("option").each(function(){c=a(this).is(":selected")?c+('<dd class="'+b.selectedCls+'" data-value="'+a(this).val()+'">'+a(this).text()+"</dd>"):c+('<dd data-value="'+a(this).val()+'">'+a(this).text()+
"</dd>")});a(e).after(c);thisBox=a(e).next("."+b.selectBoxCls);f=thisBox.find("."+b.curSCls);d=thisBox.find("."+b.optionCls);f.click(function(){a(e).parent().siblings().find("."+b.optionCls).hide();a("."+b.selectBoxCls).css("zIndex",b.zindex);a(e).next("."+b.selectBoxCls).css("zIndex",b.zindex+1);d.toggle()});d.height()>b.height&&d.height(b.height);d.find("dd").click(function(){a(this).addClass(b.selectedCls).siblings().removeClass(b.selectedCls);g=d.find("dd").index(this);f.text(a(this).text());
a(e).val(a(this).data("value")).trigger("change");if(d.parent().prev().attr("id")=="select_item")if(g==2){a("#mselect").next(".i_selectbox").hide();a("#mselect2").next(".i_selectbox").show()}else{a("#mselect").next(".i_selectbox").show();a("#mselect2").next(".i_selectbox").hide()}a("."+b.selectBoxCls).css("zIndex",b.zindex);d.hide()});a("html,body").click(function(c){if(c.target.className.indexOf(b.curSCls)==-1){d.hide();a("."+b.selectBoxCls).css("zIndex",b.zindex)}});d.click(function(a){a.stopPropagation()})})}})(jQuery);
