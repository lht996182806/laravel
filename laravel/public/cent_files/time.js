OO("com.mi.utils.time",function(e){var c=e.$class({duration:5000,interval:100,timer:null,constructor:function(f){this.duration=f.duration||this.duration;this.interval=f.interval||this.interval;this.onProgress=f.onProgress;this.onComplete=f.onComplete;this.onStop=f.onStop},start:function(){var f=this;this.startTime=+new Date;this.timer=setInterval(e.proxy(function(){var g=+new Date,i=g-this.startTime,h=this.duration;if(i<h){var j=h-i;if(this.onProgress){this.onProgress({timeLeft:j,finished:100*j/h})}}else{clearInterval(this.timer);this.timer=null;delete this.startTime;if(this.onStop){this.onStop()}if(this.onComplete){this.onComplete()}}},this),this.interval)},stop:function(){clearInterval(this.timer);this.timer=null;delete this.startTime;if(this.onStop){this.onStop()}}});var a=function(h,j,g){var m,l,f,k,n;var i=function(){var o=b()-k;if(o<j&&o>0){m=setTimeout(i,j-o)}else{m=null;if(!g){n=h.apply(f,l);if(!m){f=l=null}}}};return function(){f=this;l=arguments;k=b();var o=g&&!m;if(!m){m=setTimeout(i,j)}if(o){n=h.apply(f,l);f=l=null}return n}};var d=function(g,i,m){var f,k,n;var l=null;var j=0;if(!m){m={}}var h=function(){j=m.leading===false?0:b();l=null;n=g.apply(f,k);if(!l){f=k=null}};return function(){var o=o();if(!j&&m.leading===false){j=o}var p=i-(o-j);f=this;k=arguments;if(p<=0||p>i){clearTimeout(l);l=null;j=o;n=g.apply(f,k);if(!l){f=k=null}}else{if(!l&&m.trailing!==false){l=setTimeout(h,p)}}return n}};var b=function(){if(Date.now){return Date.now()}return +new Date};return{Countdown:c,debounce:a,throttle:d,now:b}});